/* — RESET & BASE — */
* { margin: 0; padding: 0; box-sizing: border-box; }
html, body {
  width: 100%; height: 100%;
  font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
  font-size: 14px; line-height: 1.5; color: #222; background: #fafafa;
  overflow-x: hidden; /* no horizontal scroll on page */
}

/* — HEADER — */
header {
  position: sticky; top: 0;
  display: flex; align-items: center;
  padding: 1rem 2rem; background: #fff;
  box-shadow: 0 2px 6px rgba(0,0,0,.1); z-index: 10;
  font-size: 1.5rem; font-weight: 700; color: #4a90e2;
}
.return-button {
  margin-right: auto; /* push other header items right */
  padding: .5rem 1rem;
  background: #007bff; color: #fff;
  border-radius: 6px; text-decoration: none;
  font-weight: 600; transition: background .2s;
}
.return-button:hover { background: #0056b3; }

/* — HEADER BUTTONS — */
#toggleMode {
  margin-left: 1rem;
}

/* — LAYOUT — */
.container {
  display: flex; gap: 1rem;
  padding: 1rem 2rem; height: calc(100vh - 72px);
  background: #f0f2f5;
}
.left-pane, .right-pane {
  background: #fff; border-radius: 8px;
  box-shadow: 0 4px 12px rgba(0,0,0,.05);
  padding: 1.2rem; overflow: auto;
}
.left-pane { flex: 0.7; min-width: 280px; }
.right-pane { flex: 1.8; min-width: 320px; }

/* — FORM — */
form {
  display: flex; flex-direction: column; gap: .75rem;
}
form label {
  font-size: .9rem; font-weight: 600; color: #444;
}
form input, form select {
  width: 100%; padding: .5rem .75rem;
  border: 1.5px solid #d1d9e6; border-radius: 6px;
  font-size: 1rem; color: #333; transition: border-color .2s;
}
form input:focus, form select:focus {
  outline: none; border-color: #4a90e2;
  box-shadow: 0 0 6px rgba(74,144,226,.5);
}
/* spacing before Add Entry button */
form button[type="submit"] {
  margin-top: 1.5rem;
}

/* — GLOBAL BUTTONS — */
button {
  font-family: inherit; font-weight: 600; cursor: pointer;
  padding: .6rem 1.2rem; border: none; border-radius: 6px;
  background: #4a90e2; color: #fafafa; transition: background .2s;
}
button:hover { background: #357abd; }

/* — TABLE WRAPPER — */
.table-wrapper {
  width: 100%; overflow-y: auto; overflow-x: hidden;
  max-height: calc(100% - 2rem); /* fit inside right-pane */
  -webkit-overflow-scrolling: touch;
}

/* — TABLE — */
#previewTable {
  width: auto; min-width: 100%;
  border-collapse: separate; border-spacing: 0 .6rem;
  font-size: .9rem; table-layout: auto;
}
#previewTable th, #previewTable td {
  padding: .6rem 1rem; text-align: left;
  white-space: nowrap; background: #f9fafc;
  border: none; border-radius: 6px; color: #333;
  box-shadow: 0 1px 2px rgba(0,0,0,.05);
}
#previewTable th {
  background: #e1e7f0; font-weight: 700; color: #222;
}

/* — HEADER FILTER ROWS — */
/* Operator selects (2nd row) */
#previewTable thead tr:nth-child(2) th select {
  width: 100%!important; box-sizing: border-box;
}
/* Value inputs (3rd row) */
#previewTable thead tr:nth-child(3) th input {
  width: 100%!important; box-sizing: border-box;
  background: #fff!important; color: #000!important;
  border: 1px solid #ccc!important; border-radius: 4px!important;
  padding: .35rem .5rem!important; font-size: .9rem!important;
}
#previewTable thead tr:nth-child(3) th input::placeholder {
  color: #888!important;
}

/* — CELL INTERACTIVITY — */
#previewTable td[contenteditable="true"] {
  cursor: text; transition: background .2s;
}
#previewTable td[contenteditable="true"]:focus {
  outline: 2px solid #4a90e2; background: #eaf4ff;
}

/* — DELETE BUTTON — */
#previewTable button {
  padding: .3rem .6rem; background: #ff5f56; color: #fff;
  border-radius: 5px; font-size: .85rem; transition: background .2s;
}
#previewTable button:hover { background: #e04b43; }

/* — TOTALS ROW — */
#previewTable tbody tr.total-row {
  background: rgba(0,123,255,.15)!important;
  color: #000!important; font-weight: 600;
}

/* — DARK MODE — */
.dark-mode {
  background: #121212; color: #eee;
}
.dark-mode header {
  background: #1e1e1e; color: #6ab7ff;
  box-shadow: 0 2px 6px rgba(255,255,255,.12);
}
.dark-mode .left-pane, .dark-mode .right-pane {
  background: #1e1e1e; box-shadow: 0 4px 12px rgba(255,255,255,.07);
}
.dark-mode form label,
.dark-mode #previewTable th,
.dark-mode #previewTable td {
  color: #ccc; background: #2c2c2c; border-color: #444;
}
.dark-mode form input:focus,
.dark-mode form select:focus {
  border-color: #599ef8; box-shadow: 0 0 8px rgba(89,158,248,.5);
}
.dark-mode #previewTable td[contenteditable="true"]:focus {
  outline-color: #599ef8; background: #335a9d;
}
.dark-mode #previewTable button { background: #e24343; }
.dark-mode #previewTable button:hover { background: #bf2d2d; }
.dark-mode button { color: #fff; }
.dark-mode .return-button {
  background: #375a7f; color: #fff;
}

/* — RESPONSIVE — */
@media (max-width: 768px) {
  header { font-size: 1.25rem; padding: 1rem; }
  .container { flex-direction: column; height: auto; padding: 1rem; }
  .left-pane, .right-pane { width: 100%; min-width: auto; }
  #previewTable { font-size: .85rem; }
}
